(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{155:function(e,t,n){e.exports=n(300)},160:function(e,t,n){},300:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(9),l=n.n(c),i=(n(160),n(25)),u=n(142),s=n(333),m=n(345),d=n(13),h=n(64),f=n(6),p=n(7),v=n(341),y=n(346),b=n(340),g=n(338),E=n(339),C=n(337),x=n(46),O=n.n(x),j=n(135),k=n.n(j),T=n(136),B=n.n(T),S=n(72),I=n(16),w=n(137),N=n(32),M="PAWN",R="KNIGHT",A="BISHOP",H="ROOK",L="QUEEN",W="KING",K="WHITE",P="BLACK",G="AUTOPLAY",D="COMPUTER",U="TWO_PLAYERS",J="/computer-game",_="/2-player-game",z=Object(s.a)((function(e){return{root:{height:"100%",position:"absolute",zIndex:1,pointerEvents:"none",display:"grid",placeItems:"center"},icon:function(e){return{color:e.color,width:"70% !important",height:"70%",stroke:"black",strokeWidth:15}}}})),Y=(a={},Object(I.a)(a,M,N.d),Object(I.a)(a,A,N.a),Object(I.a)(a,R,N.c),Object(I.a)(a,H,N.f),Object(I.a)(a,L,N.e),Object(I.a)(a,W,N.b),a);var Q=function(e){var t=e.piece,n=e.canInteract,a=e.dragControls,r=z({color:null===t||void 0===t?void 0:t.color});return o.a.createElement(d.a,null,t&&o.a.createElement(d.c.div,{key:t.id,layoutId:t.id,className:r.root,exit:{opacity:0,scale:0,transition:{duration:.3}},transition:{type:"spring",stiffness:1e3,damping:65},drag:n,dragControls:a,dragElastic:1,dragMomentum:!1,dragConstraints:{top:0,left:0,right:0,bottom:0},dragTransition:{bounceStiffness:900,bounceDamping:55}},o.a.createElement(w.a,{icon:Y[t.name],className:r.icon})))},q=Object(s.a)((function(e){return{root:function(e){var t=e.canInteract,n=e.isMove,a=e.hasPiece;return{cursor:t&&(a||n)?"pointer":"auto",position:"relative",webkitTouchCallout:"none",webkitUserSelect:"none",khtmlUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"}},dot:{position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",height:"35%",width:"35%",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"50%",display:"inline-block"}}}));var F=function(e){var t=e.piece,n=e.playerColor,a=e.position,r=e.backgroundColor,c=e.isSelected,l=e.isChecked,i=e.isMove,u=e.onClick,s=i||null===t||t.color===n,m=Object(d.d)(),h=q({canInteract:s,isMove:i,hasPiece:null!==t}),f=S.Color.mix(Object(S.Color)(r),Object(S.Color)("#ff0"))(.4);return o.a.createElement(d.c.div,{className:h.root,onMouseDown:s?function(e){m.start(e,{cursorProgress:{y:.5,x:.5}}),!c&&!i&&u(a)}:null,onMouseUp:s?function(){i&&u(a)}:null,initial:!1,animate:{backgroundColor:c?f:l?"#ff7961":r,transition:{duration:.13}}},o.a.createElement(d.c.div,{className:h.dot,initial:{scale:0},animate:{scale:i?1:0,transition:{duration:.2}}}),o.a.createElement(Q,{piece:t,canInteract:s&&!i,dragControls:m}))},V=n(138),X=n.n(V),Z=n(96),$=n.n(Z);function ee(){return $()(8,(function(e){return $()(8,(function(t){var n=function(e,t){if(1===e||6===e)return M;if(0===e||7===e)switch(t){case 0:case 7:return H;case 1:case 6:return R;case 2:case 5:return A;case 3:return L;case 4:return W}return null}(e,t),a=function(e){switch(e){case 0:case 1:return P;case 6:case 7:return K;default:return null}}(e),r=X()("piece_");return n?{name:n,color:a,id:r,moves:[]}:null}))}))}var te=n(73),ne=n(49),ae=n.n(ne),re=n(97),oe=n.n(re);function ce(e,t,n){var a=e.y,r=e.x,o=t.y,c=t.x,l=ae()(n),i=l[a][r];l[o][c]=ae()(Object(te.a)({},i,{moves:i.moves.concat(t)})),l[a][r]=null;var u=i.color===K?0:n.length-1;if(i.name===M&&o===u&&(l[o][c].name=L),i.name===W&&1===l[o][c].moves.length){var s=oe()(t,{y:o,x:2}),m=oe()(t,{y:o,x:6});s?(l[o][3]=ae()(Object(te.a)({},l[o][0],{moves:i.moves.concat(t)})),l[o][0]=null):m&&(l[o][5]=ae()(Object(te.a)({},l[o][7],{moves:i.moves.concat(t)})),l[o][7]=null)}return l}var le=n(34),ie=n.n(le);var ue=n(36),se=n.n(ue);function me(e,t,n){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=e.y,o=e.x,c=n[r][o],l=t.y,i=t.x,u=[],s=1;u.length<a;s++){var m=r+l*s,d=o+i*s;if(!se()(m,n.length)||!se()(d,n[0].length))break;var h=n[m][d];if(h){h.color!==c.color&&u.push({y:m,x:d});break}u.push({y:m,x:d})}return u}function de(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return[].concat(Object(p.a)(me(e,{y:-1,x:-1},t,n)),Object(p.a)(me(e,{y:-1,x:1},t,n)),Object(p.a)(me(e,{y:1,x:-1},t,n)),Object(p.a)(me(e,{y:1,x:1},t,n)))}function he(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return[].concat(Object(p.a)(me(e,{y:-1,x:0},t,n)),Object(p.a)(me(e,{y:0,x:-1},t,n)),Object(p.a)(me(e,{y:0,x:1},t,n)),Object(p.a)(me(e,{y:1,x:0},t,n)))}function fe(e,t){for(var n=function(e,t){for(var n=0;n<t.length;n++)for(var a=t[n],r=0;r<a.length;r++){var o=a[r];if(o&&e(o))return{y:n,x:r}}return null}((function(t){return t.color===e&&t.name===W}),t),a=0;a<t.length;a++)for(var r=t[a],o=0;o<r.length;o++){var c=r[o];if(c&&c.color!==e){var l=c.name===W?[].concat(Object(p.a)(he({y:a,x:o},t,1)),Object(p.a)(de({y:a,x:o},t,1))):pe({y:a,x:o},t);if(O()(l,n))return!0}}return!1}function pe(e,t){var n=e.x,a=t[e.y][n];if(null===a)return[];switch(a.name){case M:return function(e,t){var n=e.x,a=e.y,r=t[a][n],o=[],c=r.color===K?-1:1,l=ie()(t,"".concat(a+c,"[").concat(n,"]")),i=ie()(t,"".concat(a+2*c,"[").concat(n,"]")),u=ie()(t,"".concat(a+c,"[").concat(n-1,"]")),s=ie()(t,"".concat(a+c,"[").concat(n+1,"]")),m=r.color===K?6===a:1===a;return null===l&&o.push({y:a+c,x:n}),null===l&&null===i&&m&&o.push({y:a+2*c,x:n}),u&&u.color!==r.color&&o.push({y:a+c,x:n-1}),s&&s.color!==r.color&&o.push({y:a+c,x:n+1}),o}(e,t);case R:return function(e,t){var n=e.x,a=e.y,r=t[a][n];return[{y:a-2,x:n-1},{y:a-2,x:n+1},{y:a-1,x:n+2},{y:a+1,x:n+2},{y:a+2,x:n+1},{y:a+2,x:n-1},{y:a+1,x:n-2},{y:a-1,x:n-2}].filter((function(e){var n=e.y,a=e.x;return se()(n,t.length)&&se()(a,t[0].length)&&(null===t[n][a]||t[n][a].color!==r.color)}))}(e,t);case A:return de(e,t);case H:return he(e,t);case L:return[].concat(Object(p.a)(de(e,t)),Object(p.a)(he(e,t)));case W:return function(e,t){var n=e.y,a=e.x,r=t[n][a],o=r.moves.length>0,c=fe(r.color,t),l=[].concat(Object(p.a)(he(e,t,1)),Object(p.a)(de(e,t,1)));return o||c||[{rook:t[n][0],move:{y:n,x:a-2},path:{y:n,x:a-1}},{rook:t[n][7],move:{y:n,x:a+2},path:{y:n,x:a+1}}].forEach((function(n){var a=n.rook,o=n.move,c=n.path;if(null!==a&&!(a.moves.length>0)){var i=t[o.y][o.x],u=t[c.y][c.x],s=ce(e,c,t);!fe(r.color,s)&&null===u&&null===i&&l.push(o)}})),l}(e,t);default:return}}function ve(e,t){return function(e,t,n){var a=t.y,r=t.x,o=n[a][r];return e.filter((function(e){var t=e.y,c=e.x,l=ce({y:a,x:r},{y:t,x:c},n);return!fe(o.color,l)}))}(pe(e,t),e,t)}function ye(e,t){return t.flatMap((function(t,n){return t.flatMap((function(t,a){return t&&t.color===e?{y:n,x:a}:[]}))})).flatMap((function(e){return ve(e,t).map((function(t){return{position:e,move:t}}))}))}var be=Object(s.a)((function(e){return{root:function(e){var t=e.isComputerRound,n=e.chessBoardTheme;return{height:"100%",pointerEvents:t?"none":"auto",display:"grid",placeContent:"center",gridTemplateRows:"repeat(8, 1fr)",gridTemplateColumns:"repeat(8, 1fr)",borderRadius:9,border:"3px ".concat(n.BLACK," solid"),backgroundColor:n.BLACK,boxShadow:"0 8px 8px -6px rgba(0, 0, 0, 0.25)","& > :first-child":{borderTopLeftRadius:7},"& > :nth-child(8)":{borderTopRightRadius:7},"& > :nth-last-child(8)":{borderBottomLeftRadius:7},"& > :last-child":{borderBottomRightRadius:7}}},dialog:{minWidth:180}}}));var ge=function(e){var t=e.chessBoardTheme,n=e.chessBoardType,a=Object(r.useState)((function(){var e=localStorage.getItem(n);return null!==e&&n!==G?JSON.parse(e):[ee()]})),c=Object(i.a)(a,2),l=c[0],u=c[1],s=l[l.length-1];function m(e){u([].concat(Object(p.a)(l),[e]))}var h=Object(r.useState)(null),x=Object(i.a)(h,2),j=x[0],T=x[1],S=Object(r.useState)(null),I=Object(i.a)(S,2),w=I[0],N=I[1],M=Object(f.f)(),R=l.length%2===0?P:K,A=l.length%2===0?K:P,H=n===G||n===D&&R===P,L=j&&ve(j,s),U=be({isComputerRound:H,chessBoardTheme:t});function J(e){var t=e.y,n=e.x,a=s[t][n];j&&O()(L,e)?(m(ce({y:j.y,x:j.x},e,s)),T(null)):a?T(e):j&&T(null)}Object(r.useEffect)((function(){if(n!==G&&(l.length>1&&localStorage.setItem(n,JSON.stringify(l)),0===ye(R,s).length)){var e=fe(R,s)?"".concat(k()(A)," won by checkmate."):"Draw by stalemate";setTimeout((function(){return N(e)}),1e3),localStorage.removeItem(n)}H&&setTimeout((function(){var e=ye(R,s),t=e[B()(e.length-1)];void 0!==t&&m(ce(t.position,t.move,s))}),n===G?3e3:1e3)}),[s]);var _=s.flatMap((function(e,n){return e.map((function(e,a){var r={y:n,x:a},c=O()(L,r),l=j&&s[j.y][j.x]===e,i=e&&e.name===W&&fe(e.color,s);return o.a.createElement(F,{key:"".concat(n).concat(a),piece:e,playerColor:R,position:r,backgroundColor:t[(n+a)%2===0?K:P],isSelected:l,isMove:c,isChecked:i,onClick:J})}))}));return o.a.createElement("div",{className:U.root},o.a.createElement(d.b,null,_),o.a.createElement(y.a,{onClose:function(){return M.push("/")},open:null!==w},o.a.createElement(C.a,null,"Game Over"),o.a.createElement(g.a,null,o.a.createElement(E.a,{className:U.dialog},w),o.a.createElement(b.a,null,o.a.createElement(v.a,{onClick:function(){return M.push("/")},color:"primary"},"Continue")))))},Ee=n(335),Ce=n(39),xe=n(342),Oe=n(347),je=n(343),ke=n(344),Te=n(141),Be=n.n(Te),Se=n(139),Ie=n.n(Se),we=[{label:"Green",WHITE:"#eeeed2",BLACK:"#8ab757"},{label:"Blue",WHITE:"#d3f4e5",BLACK:"#53beb5"},{label:"Purple",WHITE:"#e9eaff",BLACK:"#c197f7"},{label:"Brown",WHITE:"#ffe7de",BLACK:"#d69f61"}],Ne=Object(s.a)((function(e){return{root:Object(I.a)({height:"100%",display:"grid",justifyContent:"space-evenly",alignContent:"space-evenly",alignItems:"center",gridTemplateColumns:"auto min(50vw, 72vh)"},e.breakpoints.down("sm"),{gridTemplateColumns:"auto"}),chessBoardContainer:Object(I.a)({height:"min(50vw, 72vh)",gridRow:"1 / 3",gridColumn:"2 / 3"},e.breakpoints.down("sm"),{display:"none"}),title:{backgroundColor:e.palette.secondary.main,padding:e.spacing(5),textAlign:"center",borderRadius:20},buttons:{display:"grid",justifyContent:"center",gridGap:e.spacing(1),gridTemplateColumns:"70%","& .MuiButton-root":{width:"100%",padding:e.spacing(1.5),borderRadius:15,textTransform:"none"}},themesDialogTitle:{minWidth:160},themesDialogItem:{"& .MuiListItemIcon-root":{minWidth:0}}}}));var Me=function(e){var t=e.chessBoardTheme,n=e.setChessBoardTheme,a=Object(r.useState)(!1),c=Object(i.a)(a,2),l=c[0],u=c[1],s=Object(r.useState)(null),m=Object(i.a)(s,2),h=m[0],p=m[1],x=Object(r.useState)(!1),O=Object(i.a)(x,2),j=O[0],k=O[1],T=Ne(),B=Object(f.f)(),S=[{variant:"contained",text:"Computer",color:"primary",handleClick:function(){null===localStorage.getItem(D)?B.push(J):p({handleContinueClick:function(){return B.push(J)},handleNewGameClick:function(){localStorage.removeItem(D),B.push(J)}})}},{variant:"contained",text:"2 Players",color:"primary",handleClick:function(){null===localStorage.getItem(U)?B.push(_):p({handleContinueClick:function(){return B.push(_)},handleNewGameClick:function(){localStorage.removeItem(U),B.push(_)}})}},{variant:"outlined",text:"Themes",color:"default",handleClick:function(){return u(!0)}},{variant:"outlined",text:"About",color:"default",handleClick:function(){return k(!0)}}];return o.a.createElement("div",{className:T.root},o.a.createElement(d.c.div,{className:T.titleContainer,initial:{opacity:0},animate:{opacity:1,transition:{duration:1}}},o.a.createElement(Ee.a,{className:T.title},o.a.createElement(Ce.a,{variant:"h1"},"Chess"))),o.a.createElement("div",{className:T.buttons},S.map((function(e,t){var n=e.variant,a=e.text,r=e.color,c=e.handleClick;return o.a.createElement(d.c.div,{key:a,initial:{y:400,opacity:0},animate:{y:0,opacity:1,transition:{delay:.15*t+.3,duration:.7}}},o.a.createElement(v.a,{variant:n,color:r,onClick:c},o.a.createElement(Ce.a,{variant:"h6"},a)))}))),o.a.createElement(d.c.div,{className:T.chessBoardContainer,initial:{x:900,rotate:40},animate:{x:0,rotate:0,opacity:1,transition:{duration:1,delay:.7,ease:"circOut"}}},o.a.createElement(ge,{chessBoardTheme:t,chessBoardType:G})),o.a.createElement(y.a,{onClose:function(){return u(!1)},open:l},o.a.createElement(C.a,{className:T.themesDialogTitle},"Themes"),o.a.createElement(xe.a,null,we.map((function(e,t){var a=e.label,r=e.WHITE,c=e.BLACK;return o.a.createElement(Oe.a,{className:T.themesDialogItem,button:!0,onClick:function(){n({WHITE:r,BLACK:c}),u(!1)},key:t},o.a.createElement(je.a,{primary:a}),o.a.createElement(ke.a,null,o.a.createElement(Ie.a,{style:{color:c},fontSize:"large"})))})))),o.a.createElement(y.a,{onClose:function(){return p(null)},open:null!==h},o.a.createElement(C.a,null,"Unfinished Game"),o.a.createElement(g.a,null,o.a.createElement(E.a,null,"Would you like to continue your last game?"),o.a.createElement(b.a,null,o.a.createElement(v.a,{onClick:null===h||void 0===h?void 0:h.handleContinueClick,color:"primary"},"Continue"),o.a.createElement(v.a,{onClick:null===h||void 0===h?void 0:h.handleNewGameClick,color:"primary"},"Create New Game")))),o.a.createElement(y.a,{onClose:function(){return k(!1)},open:j},o.a.createElement(C.a,null,"About"),o.a.createElement(g.a,null,o.a.createElement(E.a,null,"Hi, I'm Patrick Margot and I created this chess app."),o.a.createElement(b.a,null,o.a.createElement(v.a,{color:"primary",endIcon:o.a.createElement(Be.a,null),href:"https://github.com/PatrickMargot",target:"_blank"},"Checkout My Github")))))},Re=Object(u.a)({palette:{primary:{main:"#8bc34a"},secondary:{main:"#eeeed2"}}}),Ae=Object(s.a)((function(e){return{root:{height:"100vh",overflow:"hidden"},chessBoardContainer:{height:"100%",display:"grid",gridTemplateColumns:"95vmin",gridTemplateRows:"95vmin",placeContent:"center"}}}));var He=function(){var e=Ae(),t=Object(r.useState)((function(){var e=localStorage.getItem("CHESSBOARD_THEME");return null!==e?JSON.parse(e):{WHITE:"#eeeed2",BLACK:"#8ab757"}})),n=Object(i.a)(t,2),a=n[0],c=n[1];function l(t){return o.a.createElement(d.c.div,{className:e.chessBoardContainer,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.3}}},t.children)}return Object(r.useEffect)((function(){localStorage.setItem("CHESSBOARD_THEME",JSON.stringify(a))}),[a]),o.a.createElement(m.a,{theme:Re},o.a.createElement("div",{className:e.root},o.a.createElement(h.a,null,o.a.createElement(f.c,null,o.a.createElement(f.a,{path:J},o.a.createElement(l,null,o.a.createElement(ge,{chessBoardTheme:a,chessBoardType:D}))),o.a.createElement(f.a,{path:_},o.a.createElement(l,null,o.a.createElement(ge,{chessBoardTheme:a,chessBoardType:U}))),o.a.createElement(f.a,{path:"/"},o.a.createElement(Me,{chessBoardTheme:a,setChessBoardTheme:c}))))))};l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(He,null)),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.c3b2e329.chunk.js.map