(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{155:function(e,t,n){e.exports=n(300)},160:function(e,t,n){},300:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),l=(n(160),n(24)),i=n(142),u=n(333),s=n(345),m=n(13),d=n(64),h=n(6),f=n(7),p=n(341),v=n(346),y=n(340),g=n(338),b=n(339),E=n(337),C=n(45),x=n.n(C),O=n(135),k=n.n(O),j=n(136),T=n.n(j),I=n(72),B=n(137),S=n(31),N=Object(u.a)((function(e){return{root:{height:"100%",position:"absolute",zIndex:1,pointerEvents:"none",display:"grid",placeItems:"center"}}})),w={PAWN:S.d,BISHOP:S.a,KNIGHT:S.c,ROOK:S.f,QUEEN:S.e,KING:S.b};var R=function(e){var t=e.piece,n=e.canInteract,a=e.dragControls,o=N();return r.a.createElement(m.a,null,t&&r.a.createElement(m.c.div,{key:t.id,layoutId:t.id,className:o.root,exit:{opacity:0,scale:0,transition:{duration:.3}},transition:{type:"spring",stiffness:1e3,damping:65},drag:n,dragControls:a,dragElastic:1,dragMomentum:!1,dragConstraints:{top:0,left:0,right:0,bottom:0},dragTransition:{bounceStiffness:900,bounceDamping:55}},r.a.createElement(B.a,{icon:w[t.name],style:{width:"70%",height:"70%",color:t.color,stroke:"black",strokeWidth:15}})))},A=Object(u.a)((function(e){return{root:function(e){var t=e.canInteract,n=e.isMove,a=e.hasPiece;return{cursor:t&&(a||n)?"pointer":"auto",position:"relative",webkitTouchCallout:"none",webkitUserSelect:"none",khtmlUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"}},dot:{position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",height:"35%",width:"35%",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"50%",display:"inline-block"}}}));var M=function(e){var t=e.piece,n=e.playerColor,a=e.position,o=e.backgroundColor,c=e.isSelected,l=e.isChecked,i=e.isMove,u=e.onClick,s=i||null===t||t.color===n,d=Object(m.d)(),h=A({canInteract:s,isMove:i,hasPiece:null!==t}),f=I.Color.mix(Object(I.Color)(o),Object(I.Color)("#ff0"))(.4);return r.a.createElement(m.c.div,{className:h.root,onMouseDown:s?function(e){d.start(e,{cursorProgress:{y:.5,x:.5}}),!c&&!i&&u(a)}:null,onMouseUp:s?function(){i&&u(a)}:null,initial:!1,animate:{backgroundColor:c?f:l?"#ff7961":o,transition:{duration:.13}}},r.a.createElement(m.c.div,{className:h.dot,initial:{scale:0},animate:{scale:i?1:0,transition:{duration:.2}}}),r.a.createElement(R,{piece:t,canInteract:s&&!i,dragControls:d}))},H=n(138),K=n.n(H),W=n(96),L=n.n(W),P="PAWN",G="KNIGHT",U="BISHOP",D="ROOK",J="QUEEN",_="KING",z="WHITE",Q="BLACK",Y="AUTOPLAY",q="COMPUTER",F="TWO_PLAYERS",V="/computer-game",X="/2-player-game";function Z(){return L()(8,(function(e){return L()(8,(function(t){var n=function(e,t){if(1===e||6===e)return P;if(0===e||7===e)switch(t){case 0:case 7:return D;case 1:case 6:return G;case 2:case 5:return U;case 3:return J;case 4:return _}return null}(e,t),a=function(e){switch(e){case 0:case 1:return Q;case 6:case 7:return z;default:return null}}(e),r=K()("piece_");return n?{name:n,color:a,id:r,moves:[]}:null}))}))}var $=n(73),ee=n(49),te=n.n(ee),ne=n(97),ae=n.n(ne);function re(e,t,n){var a=e.y,r=e.x,o=t.y,c=t.x,l=te()(n),i=l[a][r];l[o][c]=te()(Object($.a)({},i,{moves:i.moves.concat(t)})),l[a][r]=null;var u=i.color===z?0:n.length-1;if(i.name===P&&o===u&&(l[o][c].name=J),i.name===_&&1===l[o][c].moves.length){var s=ae()(t,{y:o,x:2}),m=ae()(t,{y:o,x:6});s?(l[o][3]=te()(Object($.a)({},l[o][0],{moves:i.moves.concat(t)})),l[o][0]=null):m&&(l[o][5]=te()(Object($.a)({},l[o][7],{moves:i.moves.concat(t)})),l[o][7]=null)}return l}var oe=n(33),ce=n.n(oe);var le=n(35),ie=n.n(le);function ue(e,t,n){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=e.y,o=e.x,c=n[r][o],l=t.y,i=t.x,u=[],s=1;u.length<a;s++){var m=r+l*s,d=o+i*s;if(!ie()(m,n.length)||!ie()(d,n[0].length))break;var h=n[m][d];if(h){h.color!==c.color&&u.push({y:m,x:d});break}u.push({y:m,x:d})}return u}function se(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return[].concat(Object(f.a)(ue(e,{y:-1,x:-1},t,n)),Object(f.a)(ue(e,{y:-1,x:1},t,n)),Object(f.a)(ue(e,{y:1,x:-1},t,n)),Object(f.a)(ue(e,{y:1,x:1},t,n)))}function me(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return[].concat(Object(f.a)(ue(e,{y:-1,x:0},t,n)),Object(f.a)(ue(e,{y:0,x:-1},t,n)),Object(f.a)(ue(e,{y:0,x:1},t,n)),Object(f.a)(ue(e,{y:1,x:0},t,n)))}function de(e,t){for(var n=function(e,t){for(var n=0;n<t.length;n++)for(var a=t[n],r=0;r<a.length;r++){var o=a[r];if(o&&e(o))return{y:n,x:r}}return null}((function(t){return t.color===e&&t.name===_}),t),a=0;a<t.length;a++)for(var r=t[a],o=0;o<r.length;o++){var c=r[o];if(c&&c.color!==e){var l=c.name===_?[].concat(Object(f.a)(me({y:a,x:o},t,1)),Object(f.a)(se({y:a,x:o},t,1))):he({y:a,x:o},t);if(x()(l,n))return!0}}return!1}function he(e,t){var n=e.x,a=t[e.y][n];if(null===a)return[];switch(a.name){case P:return function(e,t){var n=e.x,a=e.y,r=t[a][n],o=[],c=r.color===z?-1:1,l=ce()(t,"".concat(a+c,"[").concat(n,"]")),i=ce()(t,"".concat(a+2*c,"[").concat(n,"]")),u=ce()(t,"".concat(a+c,"[").concat(n-1,"]")),s=ce()(t,"".concat(a+c,"[").concat(n+1,"]")),m=r.color===z?6===a:1===a;return null===l&&o.push({y:a+c,x:n}),null===l&&null===i&&m&&o.push({y:a+2*c,x:n}),u&&u.color!==r.color&&o.push({y:a+c,x:n-1}),s&&s.color!==r.color&&o.push({y:a+c,x:n+1}),o}(e,t);case G:return function(e,t){var n=e.x,a=e.y,r=t[a][n];return[{y:a-2,x:n-1},{y:a-2,x:n+1},{y:a-1,x:n+2},{y:a+1,x:n+2},{y:a+2,x:n+1},{y:a+2,x:n-1},{y:a+1,x:n-2},{y:a-1,x:n-2}].filter((function(e){var n=e.y,a=e.x;return ie()(n,t.length)&&ie()(a,t[0].length)&&(null===t[n][a]||t[n][a].color!==r.color)}))}(e,t);case U:return se(e,t);case D:return me(e,t);case J:return[].concat(Object(f.a)(se(e,t)),Object(f.a)(me(e,t)));case _:return function(e,t){var n=e.y,a=e.x,r=t[n][a],o=r.moves.length>0,c=de(r.color,t),l=[].concat(Object(f.a)(me(e,t,1)),Object(f.a)(se(e,t,1)));return o||c||[{rook:t[n][0],move:{y:n,x:a-2},path:{y:n,x:a-1}},{rook:t[n][7],move:{y:n,x:a+2},path:{y:n,x:a+1}}].forEach((function(n){var a=n.rook,o=n.move,c=n.path;if(null!==a&&!(a.moves.length>0)){var i=t[o.y][o.x],u=t[c.y][c.x],s=re(e,c,t);!de(r.color,s)&&null===u&&null===i&&l.push(o)}})),l}(e,t);default:return}}function fe(e,t){return function(e,t,n){var a=t.y,r=t.x,o=n[a][r];return e.filter((function(e){var t=e.y,c=e.x,l=re({y:a,x:r},{y:t,x:c},n);return!de(o.color,l)}))}(he(e,t),e,t)}function pe(e,t){return t.flatMap((function(t,n){return t.flatMap((function(t,a){return t&&t.color===e?{y:n,x:a}:[]}))})).flatMap((function(e){return fe(e,t).map((function(t){return{position:e,move:t}}))}))}var ve=Object(u.a)((function(e){return{root:function(e){var t=e.isComputerRound,n=e.chessBoardTheme;return{height:"100%",pointerEvents:t?"none":"auto",display:"grid",placeContent:"center",gridTemplateRows:"repeat(8, 1fr)",gridTemplateColumns:"repeat(8, 1fr)",borderRadius:9,border:"3px ".concat(n.BLACK," solid"),backgroundColor:n.BLACK,boxShadow:"0 8px 8px -6px rgba(0, 0, 0, 0.25)","& > :first-child":{borderTopLeftRadius:7},"& > :nth-child(8)":{borderTopRightRadius:7},"& > :nth-last-child(8)":{borderBottomLeftRadius:7},"& > :last-child":{borderBottomRightRadius:7}}},dialog:{minWidth:180}}}));var ye=function(e){var t=e.chessBoardTheme,n=e.chessBoardType,o=Object(a.useState)((function(){var e=localStorage.getItem(n);return null!==e&&n!==Y?JSON.parse(e):[Z()]})),c=Object(l.a)(o,2),i=c[0],u=c[1],s=i[i.length-1];function d(e){u([].concat(Object(f.a)(i),[e]))}var C=Object(a.useState)(null),O=Object(l.a)(C,2),j=O[0],I=O[1],B=Object(a.useState)(null),S=Object(l.a)(B,2),N=S[0],w=S[1],R=Object(h.f)(),A=i.length%2===0?Q:z,H=i.length%2===0?z:Q,K=n===Y||n===q&&A===Q,W=j&&fe(j,s),L=ve({isComputerRound:K,chessBoardTheme:t});function P(e){var t=e.y,n=e.x,a=s[t][n];j&&x()(W,e)?(d(re({y:j.y,x:j.x},e,s)),I(null)):a?I(e):j&&I(null)}Object(a.useEffect)((function(){if(n!==Y&&(i.length>1&&localStorage.setItem(n,JSON.stringify(i)),0===pe(A,s).length)){var e=de(A,s)?"".concat(k()(H)," won by checkmate."):"Draw by stalemate";setTimeout((function(){return w(e)}),1e3),localStorage.removeItem(n)}K&&setTimeout((function(){var e=pe(A,s),t=e[T()(e.length-1)];void 0!==t&&d(re(t.position,t.move,s))}),n===Y?3e3:1e3)}),[s]);var G=s.flatMap((function(e,n){return e.map((function(e,a){var o={y:n,x:a},c=x()(W,o),l=j&&s[j.y][j.x]===e,i=e&&e.name===_&&de(e.color,s);return r.a.createElement(M,{key:"".concat(n).concat(a),piece:e,playerColor:A,position:o,backgroundColor:t[(n+a)%2===0?z:Q],isSelected:l,isMove:c,isChecked:i,onClick:P})}))}));return r.a.createElement("div",{className:L.root},r.a.createElement(m.b,null,G),r.a.createElement(v.a,{onClose:function(){return R.push("/")},open:null!==N},r.a.createElement(E.a,null,"Game Over"),r.a.createElement(g.a,null,r.a.createElement(b.a,{className:L.dialog},N),r.a.createElement(y.a,null,r.a.createElement(p.a,{onClick:function(){return R.push("/")},color:"primary"},"Continue")))))},ge=n(48),be=n(335),Ee=n(38),Ce=n(342),xe=n(347),Oe=n(343),ke=n(344),je=n(141),Te=n.n(je),Ie=n(139),Be=n.n(Ie),Se=[{label:"Green",WHITE:"#eeeed2",BLACK:"#8ab757"},{label:"Blue",WHITE:"#d3f4e5",BLACK:"#53beb5"},{label:"Purple",WHITE:"#e9eaff",BLACK:"#c197f7"},{label:"Brown",WHITE:"#ffe7de",BLACK:"#d69f61"}],Ne=Object(u.a)((function(e){return{root:Object(ge.a)({height:"100%",display:"grid",justifyContent:"space-evenly",alignContent:"space-evenly",alignItems:"center",gridTemplateColumns:"auto min(50vw, 72vh)"},e.breakpoints.down("sm"),{gridTemplateColumns:"auto"}),chessBoardContainer:Object(ge.a)({height:"min(50vw, 72vh)",gridRow:"1 / 3",gridColumn:"2 / 3"},e.breakpoints.down("sm"),{display:"none"}),title:{backgroundColor:e.palette.secondary.main,padding:e.spacing(5),textAlign:"center",borderRadius:20},buttons:{display:"grid",justifyContent:"center",gridGap:e.spacing(1),gridTemplateColumns:"70%","& .MuiButton-root":{width:"100%",padding:e.spacing(1.5),borderRadius:15,textTransform:"none"}},themesDialogTitle:{minWidth:160},themesDialogItem:{"& .MuiListItemIcon-root":{minWidth:0}}}}));var we=function(e){var t=e.chessBoardTheme,n=e.setChessBoardTheme,o=Object(a.useState)(!1),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(a.useState)(null),d=Object(l.a)(s,2),f=d[0],C=d[1],x=Object(a.useState)(!1),O=Object(l.a)(x,2),k=O[0],j=O[1],T=Ne(),I=Object(h.f)(),B=[{variant:"contained",text:"Computer",color:"primary",handleClick:function(){null===localStorage.getItem(q)?I.push(V):C({handleContinueClick:function(){return I.push(V)},handleNewGameClick:function(){localStorage.removeItem(q),I.push(V)}})}},{variant:"contained",text:"2 Players",color:"primary",handleClick:function(){null===localStorage.getItem(F)?I.push(X):C({handleContinueClick:function(){return I.push(X)},handleNewGameClick:function(){localStorage.removeItem(F),I.push(X)}})}},{variant:"outlined",text:"Themes",color:"default",handleClick:function(){return u(!0)}},{variant:"outlined",text:"About",color:"default",handleClick:function(){return j(!0)}}];return r.a.createElement("div",{className:T.root},r.a.createElement(m.c.div,{className:T.titleContainer,initial:{opacity:0},animate:{opacity:1,transition:{duration:1}}},r.a.createElement(be.a,{className:T.title},r.a.createElement(Ee.a,{variant:"h1"},"Chess"))),r.a.createElement("div",{className:T.buttons},B.map((function(e,t){var n=e.variant,a=e.text,o=e.color,c=e.handleClick;return r.a.createElement(m.c.div,{key:a,initial:{y:400,opacity:0},animate:{y:0,opacity:1,transition:{delay:.15*t+.3,duration:.7}}},r.a.createElement(p.a,{variant:n,color:o,onClick:c},r.a.createElement(Ee.a,{variant:"h6"},a)))}))),r.a.createElement(m.c.div,{className:T.chessBoardContainer,initial:{x:900,rotate:40},animate:{x:0,rotate:0,opacity:1,transition:{duration:1,delay:.7,ease:"circOut"}}},r.a.createElement(ye,{chessBoardTheme:t,chessBoardType:Y})),r.a.createElement(v.a,{onClose:function(){return u(!1)},open:i},r.a.createElement(E.a,{className:T.themesDialogTitle},"Themes"),r.a.createElement(Ce.a,null,Se.map((function(e,t){var a=e.label,o=e.WHITE,c=e.BLACK;return r.a.createElement(xe.a,{className:T.themesDialogItem,button:!0,onClick:function(){n({WHITE:o,BLACK:c}),u(!1)},key:t},r.a.createElement(Oe.a,{primary:a}),r.a.createElement(ke.a,null,r.a.createElement(Be.a,{style:{color:c},fontSize:"large"})))})))),r.a.createElement(v.a,{onClose:function(){return C(null)},open:null!==f},r.a.createElement(E.a,null,"Unfinished Game"),r.a.createElement(g.a,null,r.a.createElement(b.a,null,"Would you like to continue your last game?"),r.a.createElement(y.a,null,r.a.createElement(p.a,{onClick:null===f||void 0===f?void 0:f.handleContinueClick,color:"primary"},"Continue"),r.a.createElement(p.a,{onClick:null===f||void 0===f?void 0:f.handleNewGameClick,color:"primary"},"Create New Game")))),r.a.createElement(v.a,{onClose:function(){return j(!1)},open:k},r.a.createElement(E.a,null,"About"),r.a.createElement(g.a,null,r.a.createElement(b.a,null,"Hi, I'm Patrick Margot and I created this chess app."),r.a.createElement(y.a,null,r.a.createElement(p.a,{color:"primary",endIcon:r.a.createElement(Te.a,null),href:"https://github.com/PatrickMargot",target:"_blank"},"Checkout My Github")))))},Re=Object(i.a)({palette:{primary:{main:"#8bc34a"},secondary:{main:"#eeeed2"}}}),Ae=Object(u.a)((function(e){return{root:{height:"100vh",overflow:"hidden"},chessBoardContainer:{height:"100%",display:"grid",gridTemplateColumns:"95vmin",gridTemplateRows:"95vmin",placeContent:"center"}}}));var Me=function(){var e=Ae(),t=Object(a.useState)((function(){var e=localStorage.getItem("CHESSBOARD_THEME");return null!==e?JSON.parse(e):{WHITE:"#eeeed2",BLACK:"#8ab757"}})),n=Object(l.a)(t,2),o=n[0],c=n[1];function i(t){return r.a.createElement(m.c.div,{className:e.chessBoardContainer,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.3}}},t.children)}return Object(a.useEffect)((function(){localStorage.setItem("CHESSBOARD_THEME",JSON.stringify(o))}),[o]),r.a.createElement(s.a,{theme:Re},r.a.createElement("div",{className:e.root},r.a.createElement(d.a,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{path:V},r.a.createElement(i,null,r.a.createElement(ye,{chessBoardTheme:o,chessBoardType:q}))),r.a.createElement(h.a,{path:X},r.a.createElement(i,null,r.a.createElement(ye,{chessBoardTheme:o,chessBoardType:F}))),r.a.createElement(h.a,{path:"/"},r.a.createElement(we,{chessBoardTheme:o,setChessBoardTheme:c}))))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Me,null)),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.daf57fc0.chunk.js.map