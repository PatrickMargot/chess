{"version":3,"sources":["constants.js","components/Piece.js","components/Field.js","utils/createChessBoard.js","utils/getNextChessBoard.js","utils/getMovesInALine.js","utils/getDiagonalMoves.js","utils/getStraightMoves.js","utils/checkKingCheck.js","utils/getPiecePosition.js","utils/getMovesWithChecks.js","utils/getPawnMoves.js","utils/getKnightMoves.js","utils/getKingMoves.js","utils/getMoves.js","utils/filterCheckMoves.js","utils/getAllMoves.js","components/ChessBoard.js","hooks/useWindowFocus.js","components/Menu.js","components/App.js","index.js"],"names":["PIECES","COLORS","CHESSBOARD_TYPE","PATHS","useStyles","makeStyles","theme","root","zIndex","isDragging","height","position","display","placeItems","icon","width","stroke","strokeWidth","pieceIcons","faChessPawn","faChessBishop","faChessKnight","faChessRook","faChessQueen","faChessKing","Piece","props","piece","canInteract","useState","setIsDragging","classes","dragControls","useDragControls","div","key","id","layoutId","className","style","color","animate","scale","isMobile","exit","opacity","transition","duration","type","stiffness","damping","onPointerDown","event","start","cursorProgress","y","x","drag","onDragStart","onDragEnd","dragElastic","dragMomentum","dragConstraints","top","left","right","bottom","dragTransition","bounceStiffness","bounceDamping","name","isMove","hasPiece","cursor","webkitTouchCallout","webkitUserSelect","khtmlUserSelect","mozUserSelect","msUserSelect","userSelect","dot","margin","backgroundColor","borderRadius","Field","playerColor","isSelected","isChecked","onClick","selectedBackgroundColor","Color","mix","onMouseUp","clientX","clientY","clientCoords","console","log","onTouchEnd","preventDefault","stopPropagation","changedTouches","initial","createChessBoard","times","getInitialPieceName","getInitialPieceColor","uniqueId","moves","getNextChessBoard","lastPosition","newPosition","chessBoard","lastY","lastX","newY","newX","nextChessBoard","cloneDeep","selectedPiece","concat","finishY","length","kingCastledLeft","isEqual","kingCastledRight","getMovesInALine","selectedPosition","increment","Infinity","startY","startX","yIncrement","xIncrement","line","i","inRange","push","getDiagonalMoves","getStraightMoves","checkKingCheck","kingColor","kingPosition","checkPiece","row","getPiecePosition","enemeyMoves","getMovesWithChecks","some","pawnPosition","pawn","direction","pieceAbove","get","pieceTwoAbove","pieceAboveLeft","pieceAboveRight","pawnIsStarting","getPawnMoves","knightPosition","knight","filter","getKnightMoves","king","kingHasMoved","kingIsChecked","rook","move","path","forEach","pieceOnMove","pieceOnPath","kingOnPathChessBoard","getKingMoves","getMoves","selectedY","selectedX","newChessBoard","filterCheckMoves","getAllMoves","flatMap","map","isComputerRound","chessBoardTheme","pointerEvents","placeContent","gridTemplateRows","gridTemplateColumns","border","BLACK","boxShadow","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","dialog","minWidth","ChessBoard","chessBoardType","localValue","localStorage","getItem","JSON","parse","chessBoardHistory","setChessBoardHistory","setChessBoard","setSelectedPosition","dialogText","setDialogText","windowIsFocused","document","hasFocus","setWindowIsFocused","window","addEventListener","useWindowFocus","history","useHistory","ref","useRef","enemyColor","doComputerMove","useCallback","debounce","allMoves","randomMove","random","undefined","handleClick","fieldUnderPointer","elementsFromPoint","find","element","parentNode","current","index","children","indexOf","Math","floor","clickedPiece","useEffect","setItem","stringify","dialogMessage","capitalize","setTimeout","removeItem","fields","Dialog","onClose","open","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","chessBoardThemes","label","WHITE","justifyContent","alignContent","alignItems","breakpoints","down","chessBoardContainer","gridRow","gridColumn","title","palette","secondary","main","padding","spacing","textAlign","buttons","gridGap","textTransform","themesDialogTitle","themesDialogItem","Menu","setChessBoardTheme","themesDialogOpen","setThemesDialogOpen","continueDialog","setContinueDialog","aboutDialogOpen","setAboutDialogOpen","variant","text","handleContinueClick","handleNewGameClick","titleContainer","Paper","Typography","delay","rotate","ease","List","ListItem","button","ListItemText","primary","ListItemIcon","fontSize","endIcon","href","target","createMuiTheme","overflow","App","ChessBoardContainer","ThemeProvider","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8ff16b4e.chunk.js","sourcesContent":["export const PIECES = {\r\n  PAWN: 'PAWN',\r\n  KNIGHT: 'KNIGHT',\r\n  BISHOP: 'BISHOP',\r\n  ROOK: 'ROOK',\r\n  QUEEN: 'QUEEN',\r\n  KING: 'KING',\r\n};\r\n\r\nexport const COLORS = {\r\n  WHITE: 'WHITE',\r\n  BLACK: 'BLACK',\r\n};\r\n\r\nexport const CHESSBOARD_TYPE = {\r\n  AUTOPLAY: 'AUTOPLAY',\r\n  COMPUTER: 'COMPUTER',\r\n  TWO_PLAYERS: 'TWO_PLAYERS',\r\n};\r\n\r\nexport const PATHS = {\r\n  COMPUTER_GAME: '/computer-game',\r\n  TWO_PLAYER_GAME: '/2-player-game',\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles, rgbToHex } from '@material-ui/core/styles';\r\nimport { motion, AnimatePresence, useDragControls } from 'framer-motion';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {\r\n  faChessPawn,\r\n  faChessBishop,\r\n  faChessKnight,\r\n  faChessRook,\r\n  faChessQueen,\r\n  faChessKing,\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { isMobile } from \"react-device-detect\";\r\n\r\nimport { PIECES } from '../constants';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: ({ isDragging }) => ({\r\n    zIndex: isDragging ? 2 : 1,\r\n    height: '100%',\r\n    position: 'absolute',\r\n    display: 'grid',\r\n    placeItems: 'center',\r\n  }),\r\n\r\n  icon: {\r\n    width: '70% !important',\r\n    height: '70%',\r\n    stroke: '#444',\r\n    strokeWidth: 15,\r\n  },\r\n}));\r\n\r\nconst pieceIcons = {\r\n  [PIECES.PAWN]: faChessPawn,\r\n  [PIECES.BISHOP]: faChessBishop,\r\n  [PIECES.KNIGHT]: faChessKnight,\r\n  [PIECES.ROOK]: faChessRook,\r\n  [PIECES.QUEEN]: faChessQueen,\r\n  [PIECES.KING]: faChessKing,\r\n};\r\n\r\nfunction Piece(props) {\r\n\r\n  const {\r\n    piece,\r\n    canInteract,\r\n  } = props;\r\n\r\n  const [isDragging, setIsDragging] = useState(false);\r\n\r\n  const classes = useStyles({ isDragging });\r\n\r\n  const dragControls = useDragControls();\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {piece &&\r\n        <motion.div\r\n          key={piece.id}\r\n          layoutId={piece.id}\r\n          className={classes.root}\r\n          style={{\r\n            color: piece?.color,\r\n          }}\r\n          animate={{\r\n            scale: isMobile && isDragging ? 2 : 1,\r\n          }}\r\n          exit={{\r\n            opacity: 0,\r\n            scale: 0,\r\n            transition: { duration: 0.3 },\r\n          }}\r\n          transition={{\r\n            type: 'spring',\r\n            stiffness: 1000,\r\n            damping: 65,\r\n          }}\r\n          onPointerDown={event => dragControls.start(event, { cursorProgress: { y: 0.5, x: 0.5 } })}\r\n          drag={canInteract}\r\n          onDragStart={() => setIsDragging(true)}\r\n          onDragEnd={() => setIsDragging(false)}\r\n          dragControls={dragControls}\r\n          dragElastic={1}\r\n          dragMomentum={false}\r\n          dragConstraints={{ top: 0, left: 0, right: 0, bottom: 0 }}\r\n          dragTransition={{\r\n            bounceStiffness: 900,\r\n            bounceDamping: 55,\r\n          }}\r\n        >\r\n          <FontAwesomeIcon\r\n            icon={pieceIcons[piece.name]}\r\n            className={classes.icon}\r\n          />\r\n        </motion.div>\r\n      }\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\nexport default Piece;","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { motion, useDragControls } from 'framer-motion'\r\nimport { Color } from 'framer'\r\n\r\nimport Piece from './Piece';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n  root: ({ canInteract, isMove, hasPiece }) => ({\r\n    cursor: canInteract && (hasPiece || isMove) ? 'pointer' : 'auto',\r\n    position: 'relative',\r\n    webkitTouchCallout: 'none',\r\n    webkitUserSelect: 'none',\r\n    khtmlUserSelect: 'none',\r\n    mozUserSelect: 'none',\r\n    msUserSelect: 'none',\r\n    userSelect: 'none',\r\n    '-webkit-tap-highlight-color': 'transparent',\r\n  }),\r\n\r\n  dot: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    margin: 'auto',\r\n    height: '35%',\r\n    width: '35%',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n    borderRadius: '50%',\r\n    display: 'inline-block',\r\n  },\r\n\r\n}));\r\n\r\nfunction Field(props) {\r\n\r\n  const {\r\n    piece,\r\n    playerColor,\r\n    position,\r\n    backgroundColor,\r\n    isSelected,\r\n    isChecked,\r\n    isMove,\r\n    onClick,\r\n  } = props;\r\n\r\n  const canInteract = isMove || piece === null || piece.color === playerColor;\r\n\r\n  const dragControls = useDragControls();\r\n\r\n  const classes = useStyles({\r\n    canInteract,\r\n    isMove,\r\n    hasPiece: piece !== null,\r\n  });\r\n\r\n  const selectedBackgroundColor = Color.mix(\r\n    Color(backgroundColor),\r\n    Color('#ff0')\r\n  )(0.4);\r\n\r\n  const checkedBackgroundColor = '#ff7961';\r\n\r\n  function handleMouseUp({ clientX, clientY }) {\r\n\r\n    onClick({ clientCoords: { clientX, clientY } });\r\n\r\n    console.log({ clientX, clientY })\r\n\r\n  }\r\n\r\n  function handleTouchEnd(event) {\r\n\r\n    event.preventDefault();\r\n\r\n    event.stopPropagation();\r\n\r\n    onClick({ clientCoords: event.changedTouches[0] });\r\n\r\n  }\r\n\r\n  function handleMouseDown() {\r\n\r\n    !isSelected && !isMove && onClick({ position });\r\n\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      className={classes.root}\r\n      onPointerDown={canInteract ? handleMouseDown : null}\r\n      onMouseUp={canInteract ? handleMouseUp : null}\r\n      onTouchEnd={canInteract ? handleTouchEnd : null}\r\n      initial={false}\r\n      animate={{\r\n        backgroundColor: isSelected\r\n          ? selectedBackgroundColor\r\n          : isChecked\r\n            ? checkedBackgroundColor\r\n            : backgroundColor,\r\n        transition: { duration: 0.13 }\r\n      }}\r\n    >\r\n      <motion.div\r\n        className={classes.dot}\r\n        initial={{ scale: 0 }}\r\n        animate={{ scale: isMove ? 1 : 0, transition: { duration: 0.2 } }}\r\n      />\r\n      <Piece\r\n        piece={piece}\r\n        canInteract={canInteract && !isMove}\r\n        dragControls={dragControls}\r\n      />\r\n    </motion.div >\r\n  );\r\n}\r\n\r\nexport default Field;","import uniqueId from 'lodash/uniqueId';\r\nimport times from 'lodash/times';\r\n\r\nimport { PIECES, COLORS } from '../constants';\r\n\r\nfunction getInitialPieceName(y, x) {\r\n\r\n  if (y === 1 || y === 6) {\r\n\r\n    return PIECES.PAWN;\r\n    \r\n  }\r\n\r\n  if (y === 0 || y === 7) {\r\n\r\n    switch (x) {\r\n\r\n      case 0:\r\n      case 7:\r\n        return PIECES.ROOK;\r\n\r\n      case 1:\r\n      case 6:\r\n        return PIECES.KNIGHT;\r\n\r\n      case 2:\r\n      case 5:\r\n        return PIECES.BISHOP;\r\n\r\n      case 3:\r\n        return PIECES.QUEEN;\r\n\r\n      case 4:\r\n        return PIECES.KING;\r\n\r\n      default:\r\n        // do nothing\r\n    }\r\n\r\n  }\r\n\r\n  return null;\r\n\r\n}\r\n\r\nfunction getInitialPieceColor(y) {\r\n\r\n  switch (y) {\r\n\r\n    case 0:\r\n    case 1:\r\n      return COLORS.BLACK;\r\n\r\n    case 6:\r\n    case 7:\r\n      return COLORS.WHITE;\r\n\r\n    default:\r\n      return null;\r\n\r\n  }\r\n\r\n}\r\n\r\nexport default function createChessBoard() {\r\n\r\n  return times(8, y => times(8, x => {\r\n\r\n    const name = getInitialPieceName(y, x);\r\n\r\n    const color = getInitialPieceColor(y);\r\n\r\n    const id = uniqueId('piece_');\r\n\r\n    const moves = [];\r\n\r\n    return name\r\n      ? { name, color, id, moves }\r\n      : null;\r\n\r\n  }));\r\n\r\n}","import cloneDeep from 'lodash/cloneDeep';\r\nimport isEqual from 'lodash/isEqual';\r\n\r\nimport { PIECES, COLORS } from '../constants';\r\n\r\nexport default function getNextChessBoard(lastPosition, newPosition, chessBoard) {\r\n\r\n  const { y: lastY, x: lastX } = lastPosition;\r\n\r\n  const { y: newY, x: newX } = newPosition;\r\n\r\n  const nextChessBoard = cloneDeep(chessBoard);\r\n\r\n  const selectedPiece = nextChessBoard[lastY][lastX];\r\n\r\n  nextChessBoard[newY][newX] = cloneDeep(\r\n    {\r\n      ...selectedPiece,\r\n      moves: selectedPiece.moves.concat(newPosition),\r\n    }\r\n  );\r\n\r\n  nextChessBoard[lastY][lastX] = null;\r\n\r\n  // promote pawn\r\n  const finishY = selectedPiece.color === COLORS.WHITE\r\n    ? 0\r\n    : chessBoard.length - 1;\r\n\r\n  if (selectedPiece.name === PIECES.PAWN && newY === finishY) {\r\n\r\n    nextChessBoard[newY][newX].name = PIECES.QUEEN;\r\n\r\n  }\r\n\r\n  // castling\r\n  if (selectedPiece.name === PIECES.KING && nextChessBoard[newY][newX].moves.length === 1) {\r\n\r\n    const kingCastledLeft = isEqual(newPosition, { y: newY, x: 2 });\r\n\r\n    const kingCastledRight = isEqual(newPosition, { y: newY, x: 6 });\r\n\r\n    if (kingCastledLeft) {\r\n\r\n      nextChessBoard[newY][3] = cloneDeep(\r\n        {\r\n          ...nextChessBoard[newY][0],\r\n          moves: selectedPiece.moves.concat(newPosition),\r\n        }\r\n      );\r\n\r\n      nextChessBoard[newY][0] = null;\r\n\r\n    } else if (kingCastledRight) {\r\n\r\n      nextChessBoard[newY][5] = cloneDeep(\r\n        {\r\n          ...nextChessBoard[newY][7],\r\n          moves: selectedPiece.moves.concat(newPosition),\r\n        }\r\n      );\r\n\r\n      nextChessBoard[newY][7] = null;\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n  return nextChessBoard;\r\n\r\n}","import inRange from 'lodash/inRange';\r\n\r\nexport default function getMovesInALine(selectedPosition, increment, chessBoard, length = Infinity) {\r\n\r\n  const { y: startY, x: startX } = selectedPosition;\r\n\r\n  const selectedPiece = chessBoard[startY][startX];\r\n\r\n  const { y: yIncrement, x: xIncrement } = increment;\r\n\r\n  const line = [];\r\n\r\n  for (let i = 1; line.length < length; i++) {\r\n\r\n    const y = startY + yIncrement * i;\r\n\r\n    const x = startX + xIncrement * i;\r\n\r\n    if (inRange(y, chessBoard.length) && inRange(x, chessBoard[0].length)) {\r\n\r\n      const piece = chessBoard[y][x];\r\n\r\n      if (piece) {\r\n\r\n        if (piece.color !== selectedPiece.color) {\r\n\r\n          line.push({ y, x });\r\n\r\n        }\r\n\r\n        break;\r\n\r\n      } else {\r\n\r\n        line.push({ y, x });\r\n\r\n      }\r\n\r\n\r\n    } else {\r\n\r\n      break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  return line;\r\n\r\n}","import getMovesInALine from './getMovesInALine';\r\n\r\nexport default function getDiagonalMoves(selectedPosition, chessBoard, length = Infinity) {\r\n\r\n  return [\r\n\r\n    ...getMovesInALine(selectedPosition, { y: -1, x: -1 }, chessBoard, length),\r\n\r\n    ...getMovesInALine(selectedPosition, { y: -1, x: 1 }, chessBoard, length),\r\n\r\n    ...getMovesInALine(selectedPosition, { y: 1, x: -1 }, chessBoard, length),\r\n\r\n    ...getMovesInALine(selectedPosition, { y: 1, x: 1 }, chessBoard, length),\r\n\r\n  ];\r\n\r\n}","import getMovesInALine from './getMovesInALine';\r\n\r\nexport default function getStraightMoves(selectedPosition, chessBoard, length = Infinity) {\r\n\r\n  return [\r\n\r\n    ...getMovesInALine(selectedPosition, { y: -1, x: 0 }, chessBoard, length),\r\n\r\n    ...getMovesInALine(selectedPosition, { y: 0, x: -1 }, chessBoard, length),\r\n\r\n    ...getMovesInALine(selectedPosition, { y: 0, x: 1 }, chessBoard, length),\r\n\r\n    ...getMovesInALine(selectedPosition, { y: 1, x: 0 }, chessBoard, length),\r\n\r\n  ];\r\n\r\n}","import some from 'lodash/some';\r\n\r\nimport getDiagonalMoves from './getDiagonalMoves';\r\nimport getStraightMoves from './getStraightMoves';\r\nimport getMovesWithChecks from './getMovesWithChecks';\r\nimport getPiecePosition from './getPiecePosition';\r\nimport { PIECES } from '../constants';\r\n\r\nexport default function checkKingCheck(kingColor, chessBoard) {\r\n\r\n  const kingPosition = getPiecePosition(\r\n    piece => piece.color === kingColor && piece.name === PIECES.KING,\r\n    chessBoard\r\n  );\r\n\r\n  for (let y = 0; y < chessBoard.length; y++) {\r\n\r\n    const row = chessBoard[y];\r\n\r\n    for (let x = 0; x < row.length; x++) {\r\n\r\n      const piece = row[x];\r\n\r\n      if (piece && piece.color !== kingColor) {\r\n\r\n        const enemeyMoves = piece.name === PIECES.KING\r\n          ? [\r\n            ...getStraightMoves({ y, x }, chessBoard, 1),\r\n            ...getDiagonalMoves({ y, x }, chessBoard, 1),\r\n          ]\r\n          : getMovesWithChecks({ y, x }, chessBoard);\r\n\r\n        if (some(enemeyMoves, kingPosition)) {\r\n\r\n          return true;\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  return false;\r\n\r\n}","export default function getPiecePosition(checkPiece, chessBoard) {\r\n\r\n  for (let y = 0; y < chessBoard.length; y++) {\r\n\r\n    const row = chessBoard[y];\r\n\r\n    for (let x = 0; x < row.length; x++) {\r\n\r\n      const piece = row[x];\r\n\r\n      if (piece && checkPiece(piece)) {\r\n\r\n        return { y, x };\r\n\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  return null;\r\n\r\n}","import getPawnMoves from './getPawnMoves';\r\nimport getKnightMoves from './getKnightMoves';\r\nimport getKingMoves from './getKingMoves';\r\nimport getStraightMoves from './getStraightMoves';\r\nimport getDiagonalMoves from './getDiagonalMoves';\r\n\r\nimport { PIECES } from '../constants';\r\n\r\nexport default function getMovesWithChecks(selectedPosition, chessBoard) {\r\n\r\n  const { x, y } = selectedPosition;\r\n  \r\n  const selectedPiece = chessBoard[y][x];\r\n\r\n  if (selectedPiece === null) return [];\r\n\r\n  switch (selectedPiece.name) {\r\n\r\n    case PIECES.PAWN:\r\n      return getPawnMoves(selectedPosition, chessBoard);\r\n\r\n    case PIECES.KNIGHT:\r\n      return getKnightMoves(selectedPosition, chessBoard);\r\n\r\n    case PIECES.BISHOP:\r\n      return getDiagonalMoves(selectedPosition, chessBoard);\r\n\r\n    case PIECES.ROOK:\r\n      return getStraightMoves(selectedPosition, chessBoard);\r\n\r\n    case PIECES.QUEEN:\r\n     return [\r\n       ...getDiagonalMoves(selectedPosition, chessBoard),\r\n       ...getStraightMoves(selectedPosition, chessBoard),\r\n     ];\r\n\r\n    case PIECES.KING:\r\n      return getKingMoves(selectedPosition, chessBoard);\r\n\r\n    default:\r\n      return undefined;\r\n\r\n  }\r\n\r\n}","import get from 'lodash/get';\r\n\r\nimport { COLORS } from '../constants';\r\n\r\nexport default function getPawnMoves(pawnPosition, chessBoard) {\r\n\r\n  const { x, y } = pawnPosition;\r\n\r\n  const pawn = chessBoard[y][x];\r\n\r\n  const moves = [];\r\n\r\n  const direction = pawn.color === COLORS.WHITE ? -1 : 1;\r\n\r\n  const pieceAbove = get(chessBoard, `${y + direction}[${x}]`);\r\n\r\n  const pieceTwoAbove = get(chessBoard, `${y + 2 * direction}[${x}]`);\r\n\r\n  const pieceAboveLeft = get(chessBoard, `${y + direction}[${x - 1}]`);\r\n\r\n  const pieceAboveRight = get(chessBoard, `${y + direction}[${x + 1}]`);\r\n\r\n  const pawnIsStarting = pawn.color === COLORS.WHITE\r\n    ? y === 6\r\n    : y === 1;\r\n\r\n  pieceAbove === null\r\n    && moves.push({ y: y + direction, x });\r\n\r\n  pieceAbove === null\r\n    && pieceTwoAbove === null\r\n    && pawnIsStarting\r\n    && moves.push({ y: y + 2 * direction, x });\r\n  \r\n  pieceAboveLeft\r\n    && pieceAboveLeft.color !== pawn.color\r\n    && moves.push({ y: y + direction, x: x - 1 });\r\n\r\n  pieceAboveRight\r\n    && pieceAboveRight.color !== pawn.color\r\n    && moves.push({ y: y + direction, x: x + 1 });\r\n\r\n  return moves;\r\n\r\n}","import inRange from 'lodash/inRange';\r\n\r\nexport default function getKnightMoves(knightPosition, chessBoard) {\r\n\r\n  const { x, y } = knightPosition;\r\n\r\n  const knight = chessBoard[y][x];\r\n\r\n  const moves = [\r\n    { y: y - 2, x: x - 1 },\r\n    { y: y - 2, x: x + 1 },\r\n    { y: y - 1, x: x + 2 },\r\n    { y: y + 1, x: x + 2 },\r\n    { y: y + 2, x: x + 1 },\r\n    { y: y + 2, x: x - 1 },\r\n    { y: y + 1, x: x - 2 },\r\n    { y: y - 1, x: x - 2 },\r\n  ];\r\n\r\n  const movesInsideBoardAndLegal = moves.filter(({ y, x }) => {\r\n\r\n    const isInRange = inRange(y, chessBoard.length) && inRange(x, chessBoard[0].length);\r\n\r\n    return isInRange && (chessBoard[y][x] === null || chessBoard[y][x].color !== knight.color);\r\n\r\n  });\r\n\r\n  return movesInsideBoardAndLegal;\r\n\r\n}","import getDiagonalMoves from './getDiagonalMoves';\r\nimport getStraightMoves from './getStraightMoves';\r\nimport getNextChessBoard from './getNextChessBoard';\r\nimport checkKingCheck from './checkKingCheck';\r\n\r\nexport default function getKingMoves(kingPosition, chessBoard) {\r\n\r\n  const { y, x } = kingPosition;\r\n\r\n  const king = chessBoard[y][x];\r\n\r\n  const kingHasMoved = king.moves.length > 0;\r\n\r\n  const kingIsChecked = checkKingCheck(king.color, chessBoard);\r\n\r\n  const moves = [\r\n    ...getStraightMoves(kingPosition, chessBoard, 1),\r\n    ...getDiagonalMoves(kingPosition, chessBoard, 1),\r\n  ];\r\n\r\n  if (kingHasMoved || kingIsChecked) return moves;\r\n\r\n  // castling\r\n  const castlingOptions = [\r\n    {\r\n      rook: chessBoard[y][0],\r\n      move: { y, x: x - 2 },\r\n      path: { y, x: x - 1 },\r\n    },\r\n    {\r\n      rook: chessBoard[y][7],\r\n      move: { y, x: x + 2 },\r\n      path: { y, x: x + 1 },\r\n    },\r\n  ];\r\n\r\n  castlingOptions.forEach(({ rook, move, path }) => {\r\n\r\n    if (rook === null) return;\r\n\r\n    const rookHasMoved = rook.moves.length > 0;\r\n\r\n    if (rookHasMoved) return;\r\n\r\n    const pieceOnMove = chessBoard[move.y][move.x];\r\n\r\n    const pieceOnPath = chessBoard[path.y][path.x];\r\n\r\n    const kingOnPathChessBoard = getNextChessBoard(\r\n      kingPosition,\r\n      path,\r\n      chessBoard\r\n    );\r\n\r\n    const pathIsChecked = checkKingCheck(king.color, kingOnPathChessBoard);\r\n\r\n    !pathIsChecked\r\n      && pieceOnPath === null\r\n      && pieceOnMove === null\r\n      && moves.push(move);\r\n\r\n  });\r\n\r\n  return moves;\r\n\r\n}","import getMovesWithChecks from './getMovesWithChecks';\r\nimport filterCheckMoves from './filterCheckMoves';\r\n\r\nexport default function getMoves(selectedPosition, chessBoard) {\r\n\r\n  const moves = getMovesWithChecks(selectedPosition, chessBoard);\r\n\r\n  return filterCheckMoves(moves, selectedPosition, chessBoard);\r\n\r\n}","import getNextChessBoard from \"./getNextChessBoard\";\r\nimport checkKingCheck from './checkKingCheck';\r\n\r\nexport default function getNonCheckMoves(moves, selectedPosition, chessBoard) {\r\n\r\n  const { y: selectedY, x: selectedX } = selectedPosition;\r\n\r\n  const selectedPiece = chessBoard[selectedY][selectedX];\r\n\r\n  const nonCheckMoves = moves.filter(({ y, x }) => {\r\n\r\n    const newChessBoard = getNextChessBoard(\r\n      { y: selectedY, x: selectedX },\r\n      { y, x },\r\n      chessBoard\r\n    );\r\n\r\n    return !checkKingCheck(selectedPiece.color, newChessBoard);\r\n\r\n  });\r\n\r\n  return nonCheckMoves;\r\n\r\n}","import getMoves from './getMoves';\r\n\r\nexport default function getAllMoves(playerColor, chessBoard) {\r\n\r\n  const piecePositions = chessBoard.flatMap((row, y) =>\r\n\r\n    row.flatMap((piece, x) => {\r\n\r\n      return piece && piece.color === playerColor\r\n        ? { y, x }\r\n        : [];\r\n\r\n    })\r\n\r\n  );\r\n\r\n  return piecePositions.flatMap(position => {\r\n\r\n    const moves = getMoves(position, chessBoard);\r\n\r\n    return moves.map(move => ({ position, move }));\r\n\r\n  });\r\n\r\n}","import React, { useState, useCallback, useEffect, useRef } from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport some from 'lodash/some';\r\nimport capitalize from 'lodash/capitalize';\r\nimport random from 'lodash/random';\r\nimport debounce from 'lodash/debounce';\r\n\r\nimport { AnimateSharedLayout } from \"framer-motion\";\r\n\r\nimport Field from './Field';\r\nimport useWindowFocus from '../hooks/useWindowFocus';\r\nimport createChessBoard from '../utils/createChessBoard';\r\nimport getNextChessBoard from '../utils/getNextChessBoard';\r\nimport getMoves from '../utils/getMoves';\r\nimport checkKingCheck from '../utils/checkKingCheck';\r\nimport getAllMoves from '../utils/getAllMoves';\r\nimport { COLORS, PIECES, CHESSBOARD_TYPE } from '../constants';\r\n\r\nconst borderRadius = 7;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: ({ isComputerRound, chessBoardTheme }) => ({\r\n    height: '100%',\r\n    pointerEvents: isComputerRound ? 'none' : 'auto',\r\n    display: 'grid',\r\n    placeContent: 'center',\r\n    gridTemplateRows: 'repeat(8, 1fr)',\r\n    gridTemplateColumns: 'repeat(8, 1fr)',\r\n    borderRadius: borderRadius + 2,\r\n    border: `3px ${chessBoardTheme.BLACK} solid`,\r\n    backgroundColor: chessBoardTheme.BLACK,\r\n    boxShadow: '0 8px 8px -6px rgba(0, 0, 0, 0.25)',\r\n    '& > :first-child': {\r\n      borderTopLeftRadius: borderRadius,\r\n    },\r\n    '& > :nth-child(8)': {\r\n      borderTopRightRadius: borderRadius,\r\n    },\r\n    '& > :nth-last-child(8)': {\r\n      borderBottomLeftRadius: borderRadius,\r\n    },\r\n    '& > :last-child': {\r\n      borderBottomRightRadius: borderRadius,\r\n    },\r\n  }),\r\n\r\n  dialog: {\r\n    minWidth: 180,\r\n  },\r\n\r\n}));\r\n\r\nfunction ChessBoard(props) {\r\n\r\n  const {\r\n    chessBoardTheme,\r\n    chessBoardType,\r\n  } = props;\r\n\r\n  const [chessBoardHistory, setChessBoardHistory] = useState(() => {\r\n\r\n    const localValue = localStorage.getItem(chessBoardType);\r\n\r\n    return localValue !== null && chessBoardType !== CHESSBOARD_TYPE.AUTOPLAY\r\n      ? JSON.parse(localValue)\r\n      : [createChessBoard()];\r\n\r\n  });\r\n\r\n  const chessBoard = chessBoardHistory[chessBoardHistory.length - 1];\r\n\r\n  const setChessBoard = (chessBoard) => setChessBoardHistory([...chessBoardHistory, chessBoard]);\r\n\r\n  const [selectedPosition, setSelectedPosition] = useState(null);\r\n\r\n  const [dialogText, setDialogText] = useState(null);\r\n\r\n  const windowIsFocused = useWindowFocus();\r\n\r\n  const history = useHistory();\r\n\r\n  const ref = useRef();\r\n\r\n  const playerColor = chessBoardHistory.length % 2 === 0\r\n    ? COLORS.BLACK\r\n    : COLORS.WHITE;\r\n\r\n  const enemyColor = chessBoardHistory.length % 2 === 0\r\n    ? COLORS.WHITE\r\n    : COLORS.BLACK;\r\n\r\n  const isComputerRound =\r\n    chessBoardType === CHESSBOARD_TYPE.AUTOPLAY\r\n    || (chessBoardType === CHESSBOARD_TYPE.COMPUTER && playerColor === COLORS.BLACK);\r\n\r\n  const moves = selectedPosition && getMoves(selectedPosition, chessBoard);\r\n\r\n  const classes = useStyles({\r\n    isComputerRound,\r\n    chessBoardTheme,\r\n  });\r\n\r\n  // doComputerMove function will only change when chessBoard changes\r\n  // this will ensure that the debounce function will work\r\n  const doComputerMove = useCallback(\r\n\r\n    debounce(() => {\r\n\r\n      const allMoves = getAllMoves(playerColor, chessBoard);\r\n\r\n      const randomMove = allMoves[random(allMoves.length - 1)];\r\n\r\n      if (randomMove === undefined) return;\r\n\r\n      const { position, move } = randomMove;\r\n\r\n      const nextChessBoard = getNextChessBoard(position, move, chessBoard);\r\n\r\n      setChessBoard(nextChessBoard);\r\n\r\n    }, chessBoardType === CHESSBOARD_TYPE.AUTOPLAY ? 3000 : 1000),\r\n\r\n    [chessBoard]\r\n\r\n  );\r\n\r\n  // run this code when chessBoard changes or on window focus\r\n  useEffect(() => {\r\n\r\n    if (!windowIsFocused) return;\r\n\r\n    if (chessBoardType !== CHESSBOARD_TYPE.AUTOPLAY) {\r\n\r\n      // add state to localStorage\r\n      chessBoardHistory.length > 1\r\n        && localStorage.setItem(chessBoardType, JSON.stringify(chessBoardHistory));\r\n\r\n      // check if game is over\r\n      const allMoves = getAllMoves(playerColor, chessBoard);\r\n\r\n      if (allMoves.length === 0) {\r\n\r\n        const kingIsChecked = checkKingCheck(playerColor, chessBoard);\r\n\r\n        const dialogMessage = kingIsChecked\r\n          ? `${capitalize(enemyColor)} won by checkmate.`\r\n          : 'Draw by stalemate';\r\n\r\n        setTimeout(() => setDialogText(dialogMessage), 1000);\r\n\r\n        localStorage.removeItem(chessBoardType);\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // do a computer move if it is a computer round\r\n    isComputerRound && doComputerMove();\r\n\r\n  }, [chessBoard, windowIsFocused]);\r\n\r\n\r\n  function handleClick({ position, clientCoords }) {\r\n\r\n    if (clientCoords) {\r\n\r\n      const { clientX, clientY } = clientCoords;\r\n\r\n      const elements = document.elementsFromPoint(clientX, clientY);\r\n\r\n      const fieldUnderPointer = elements.find(element => element.parentNode === ref.current);\r\n\r\n      const index = [...ref.current.children].indexOf(fieldUnderPointer);\r\n\r\n      if (index < 0) return;\r\n\r\n      position = {\r\n        y: Math.floor(index / 8),\r\n        x: index % 8,\r\n      };\r\n\r\n      if (!some(moves, position)) return;\r\n\r\n    }\r\n\r\n    const { y, x } = position;\r\n\r\n    const clickedPiece = chessBoard[y][x];\r\n\r\n    // if selected and position is a move, set next chess board\r\n    if (selectedPosition && some(moves, position)) {\r\n\r\n      const nextChessBoard = getNextChessBoard(\r\n        { y: selectedPosition.y, x: selectedPosition.x },\r\n        position,\r\n        chessBoard\r\n      );\r\n\r\n      setChessBoard(nextChessBoard);\r\n\r\n      setSelectedPosition(null);\r\n\r\n      // else if a piece was clicked, select\r\n    } else if (clickedPiece) {\r\n\r\n      setSelectedPosition(position);\r\n\r\n      // else if something is currently selected, deselect\r\n    } else if (selectedPosition) {\r\n\r\n      setSelectedPosition(null);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  const fields = chessBoard.flatMap((row, y) => row.map((piece, x) => {\r\n\r\n    const position = { y, x };\r\n\r\n    const isMove = some(moves, position);\r\n\r\n    const isSelected = selectedPosition && chessBoard[selectedPosition.y][selectedPosition.x] === piece;\r\n\r\n    const isChecked =\r\n      piece\r\n      && piece.name === PIECES.KING\r\n      && checkKingCheck(piece.color, chessBoard);\r\n\r\n    return (\r\n      <Field\r\n        key={`${y}${x}`}\r\n        piece={piece}\r\n        playerColor={playerColor}\r\n        position={position}\r\n        backgroundColor={chessBoardTheme[\r\n          (y + x) % 2 === 0 ? COLORS.WHITE : COLORS.BLACK\r\n        ]}\r\n        isSelected={isSelected}\r\n        isMove={isMove}\r\n        isChecked={isChecked}\r\n        onClick={handleClick}\r\n      />\r\n    );\r\n\r\n  }));\r\n\r\n  return (\r\n    <div className={classes.root} ref={ref}>\r\n\r\n      <AnimateSharedLayout>\r\n        {fields}\r\n      </AnimateSharedLayout>\r\n\r\n      <Dialog onClose={() => history.push('/')} open={dialogText !== null} >\r\n        <DialogTitle>Game Over</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText className={classes.dialog} >\r\n            {dialogText}\r\n          </DialogContentText>\r\n          <DialogActions>\r\n            <Button onClick={() => history.push('/')} color=\"primary\" >\r\n              Continue\r\n            </Button>\r\n          </DialogActions>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChessBoard;","import { useState } from 'react';\r\n\r\nexport default function useWindowFocus() {\r\n\r\n  const [windowIsFocused, setWindowIsFocused] = useState(document.hasFocus());\r\n\r\n  window.addEventListener('blur', () => setWindowIsFocused(false));\r\n\r\n  window.addEventListener('focus', () => setWindowIsFocused(true));\r\n\r\n  return windowIsFocused\r\n\r\n}","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\r\n\r\nimport { motion } from \"framer-motion\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport ChessBoard from './ChessBoard';\r\n\r\nimport { CHESSBOARD_TYPE, PATHS } from '../constants';\r\n\r\nconst chessBoardThemes = [\r\n  {\r\n    label: 'Green',\r\n    WHITE: '#eeeed2',\r\n    BLACK: '#8ab757',\r\n  },\r\n  {\r\n    label: 'Blue',\r\n    WHITE: '#d3f4e5',\r\n    BLACK: '#53beb5',\r\n  },\r\n  {\r\n    label: 'Purple',\r\n    WHITE: '#e9eaff',\r\n    BLACK: '#c197f7',\r\n  },\r\n  {\r\n    label: 'Brown',\r\n    WHITE: '#ffe7de',\r\n    BLACK: '#d69f61',\r\n  },\r\n];\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n  root: {\r\n    height: '100%',\r\n    display: 'grid',\r\n    justifyContent: 'space-evenly',\r\n    alignContent: 'space-evenly',\r\n    alignItems: 'center',\r\n    gridTemplateColumns: 'auto min(50vw, 72vh)',\r\n\r\n    [theme.breakpoints.down('sm')]: {\r\n      gridTemplateColumns: 'auto',\r\n    },\r\n  },\r\n\r\n  chessBoardContainer: {\r\n    height: 'min(50vw, 72vh)',\r\n    gridRow: '1 / 3',\r\n    gridColumn: '2 / 3',\r\n\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n\r\n  title: {\r\n    backgroundColor: theme.palette.secondary.main,\r\n    padding: theme.spacing(5),\r\n    textAlign: 'center',\r\n    borderRadius: 20,\r\n  },\r\n\r\n  buttons: {\r\n    display: 'grid',\r\n    justifyContent: 'center',\r\n    gridGap: theme.spacing(1),\r\n    gridTemplateColumns: '70%',\r\n\r\n    '& .MuiButton-root': {\r\n      width: '100%',\r\n      padding: theme.spacing(1.5),\r\n      borderRadius: 15,\r\n      textTransform: 'none',\r\n    },\r\n  },\r\n\r\n  themesDialogTitle: {\r\n    minWidth: 160,\r\n  },\r\n\r\n  themesDialogItem: {\r\n    '& .MuiListItemIcon-root': {\r\n      minWidth: 0,\r\n    }\r\n  },\r\n\r\n}));\r\n\r\n\r\nfunction Menu(props) {\r\n\r\n  const {\r\n    chessBoardTheme,\r\n    setChessBoardTheme,\r\n  } = props;\r\n\r\n  const [themesDialogOpen, setThemesDialogOpen] = useState(false);\r\n\r\n  const [continueDialog, setContinueDialog] = useState(null);\r\n\r\n  const [aboutDialogOpen, setAboutDialogOpen] = useState(false);\r\n\r\n  const classes = useStyles();\r\n\r\n  const history = useHistory();\r\n\r\n  const buttons = [\r\n    {\r\n      variant: 'contained',\r\n      text: 'Computer',\r\n      color: 'primary',\r\n      handleClick: () => {\r\n        if (localStorage.getItem(CHESSBOARD_TYPE.COMPUTER) === null) {\r\n\r\n          history.push(PATHS.COMPUTER_GAME);\r\n\r\n        } else {\r\n\r\n          setContinueDialog({\r\n            handleContinueClick: () => history.push(PATHS.COMPUTER_GAME),\r\n            handleNewGameClick: () => {\r\n              localStorage.removeItem(CHESSBOARD_TYPE.COMPUTER);\r\n              history.push(PATHS.COMPUTER_GAME);\r\n            },\r\n          });\r\n\r\n        }\r\n      },\r\n    },\r\n    {\r\n      variant: 'contained',\r\n      text: '2 Players',\r\n      color: 'primary',\r\n      handleClick: () => {\r\n        if (localStorage.getItem(CHESSBOARD_TYPE.TWO_PLAYERS) === null) {\r\n\r\n          history.push(PATHS.TWO_PLAYER_GAME);\r\n\r\n        } else {\r\n\r\n          setContinueDialog({\r\n            handleContinueClick: () => history.push(PATHS.TWO_PLAYER_GAME),\r\n            handleNewGameClick: () => {\r\n              localStorage.removeItem(CHESSBOARD_TYPE.TWO_PLAYERS);\r\n              history.push(PATHS.TWO_PLAYER_GAME);\r\n            },\r\n          });\r\n\r\n        }\r\n      },\r\n    },\r\n    {\r\n      variant: 'outlined',\r\n      text: 'Themes',\r\n      color: 'default',\r\n      handleClick: () => setThemesDialogOpen(true),\r\n    },\r\n    {\r\n      variant: 'outlined',\r\n      text: 'About',\r\n      color: 'default',\r\n      handleClick: () => setAboutDialogOpen(true),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n\r\n      <motion.div\r\n        className={classes.titleContainer}\r\n        initial={{\r\n          opacity: 0,\r\n        }}\r\n        animate={{\r\n          opacity: 1,\r\n          transition: {\r\n            duration: 1,\r\n          },\r\n        }}\r\n      >\r\n        <Paper className={classes.title}>\r\n          <Typography variant=\"h1\">\r\n            Chess\r\n            </Typography>\r\n        </Paper>\r\n      </motion.div>\r\n      <div className={classes.buttons}>\r\n        {buttons.map(({ variant, text, color, handleClick }, i) => (\r\n          <motion.div\r\n            key={text}\r\n            initial={{\r\n              y: 400,\r\n              opacity: 0,\r\n            }}\r\n            animate={{\r\n              y: 0,\r\n              opacity: 1,\r\n              transition: {\r\n                delay: i * 0.15 + 0.3,\r\n                duration: 0.7,\r\n              },\r\n            }}\r\n          >\r\n            <Button variant={variant} color={color} onClick={handleClick} >\r\n              <Typography variant=\"h6\">\r\n                {text}\r\n              </Typography>\r\n            </Button>\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n\r\n      <motion.div\r\n        className={classes.chessBoardContainer}\r\n        initial={{\r\n          x: 900,\r\n          rotate: 40,\r\n        }}\r\n        animate={{\r\n          x: 0,\r\n          rotate: 0,\r\n          opacity: 1,\r\n          transition: {\r\n            duration: 1,\r\n            delay: 0.7,\r\n            ease: \"circOut\",\r\n          },\r\n        }}\r\n      >\r\n        <ChessBoard chessBoardTheme={chessBoardTheme} chessBoardType={CHESSBOARD_TYPE.AUTOPLAY} />\r\n      </motion.div>\r\n\r\n      <Dialog onClose={() => setThemesDialogOpen(false)} open={themesDialogOpen}>\r\n        <DialogTitle className={classes.themesDialogTitle}>Themes</DialogTitle>\r\n        <List>\r\n          {chessBoardThemes.map(({ label, WHITE, BLACK }, i) => (\r\n            <ListItem\r\n              className={classes.themesDialogItem}\r\n              button\r\n              onClick={() => {\r\n                setChessBoardTheme({ WHITE, BLACK });\r\n                setThemesDialogOpen(false);\r\n              }}\r\n              key={i}\r\n            >\r\n              <ListItemText primary={label} />\r\n              <ListItemIcon>\r\n                <FiberManualRecordIcon style={{ color: BLACK }} fontSize=\"large\" />\r\n              </ListItemIcon>\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </Dialog>\r\n\r\n      <Dialog onClose={() => setContinueDialog(null)} open={continueDialog !== null} >\r\n        <DialogTitle>Unfinished Game</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText >\r\n            Would you like to continue your last game?\r\n          </DialogContentText>\r\n          <DialogActions>\r\n            <Button onClick={continueDialog?.handleContinueClick} color=\"primary\" >\r\n              Continue\r\n            </Button>\r\n            <Button onClick={continueDialog?.handleNewGameClick} color=\"primary\" >\r\n              Create New Game\r\n            </Button>\r\n          </DialogActions>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Dialog onClose={() => setAboutDialogOpen(false)} open={aboutDialogOpen} >\r\n        <DialogTitle>About</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText >\r\n            Hi, I'm Patrick Margot and I created this chess app.\r\n          </DialogContentText>\r\n          <DialogActions>\r\n            <Button\r\n              color=\"primary\"\r\n              endIcon={<GitHubIcon />}\r\n              href=\"https://github.com/PatrickMargot\"\r\n              target=\"_blank\"\r\n            >\r\n              Checkout My Github\r\n            </Button>\r\n          </DialogActions>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Menu;","import React, { useState, useEffect } from 'react';\nimport { makeStyles, createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\n\nimport { motion } from \"framer-motion\";\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport ChessBoard from './ChessBoard';\nimport Menu from './Menu';\n\nimport { CHESSBOARD_TYPE, PATHS } from '../constants';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#8bc34a',\n    },\n    secondary: {\n      main: '#eeeed2',\n    },\n  },\n});\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    overflow: 'hidden',\n  },\n  chessBoardContainer: {\n    height: '100%',\n    display: 'grid',\n    gridTemplateColumns: '95vmin',\n    gridTemplateRows: '95vmin',\n    placeContent: 'center',\n  },\n}));\n\nfunction App() {\n\n  const classes = useStyles();\n\n  const [chessBoardTheme, setChessBoardTheme] = useState(() => {\n\n    const localValue = localStorage.getItem('CHESSBOARD_THEME');\n\n    return localValue !== null\n      ? JSON.parse(localValue)\n      : {\n        WHITE: '#eeeed2',\n        BLACK: '#8ab757',\n      };\n\n  });\n\n  useEffect(() => {\n\n    localStorage.setItem('CHESSBOARD_THEME', JSON.stringify(chessBoardTheme));\n\n  }, [chessBoardTheme]);\n\n  function ChessBoardContainer(props) {\n\n    return (\n      <motion.div\n        className={classes.chessBoardContainer}\n        initial={{\n          opacity: 0,\n          scale: 0.95,\n        }}\n        animate={{\n          opacity: 1,\n          scale: 1,\n          transition: {\n            duration: 0.3,\n          },\n        }}\n      >\n        {props.children}\n      </motion.div>\n    );\n\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div className={classes.root}>\n        <Router>\n          <Switch>\n\n            <Route path={PATHS.COMPUTER_GAME}>\n              <ChessBoardContainer>\n                <ChessBoard chessBoardTheme={chessBoardTheme} chessBoardType={CHESSBOARD_TYPE.COMPUTER} />\n              </ChessBoardContainer>\n            </Route>\n\n            <Route path={PATHS.TWO_PLAYER_GAME}>\n              <ChessBoardContainer>\n                <ChessBoard chessBoardTheme={chessBoardTheme} chessBoardType={CHESSBOARD_TYPE.TWO_PLAYERS} />\n              </ChessBoardContainer>\n            </Route>\n\n            <Route path=\"/\">\n              <Menu chessBoardTheme={chessBoardTheme} setChessBoardTheme={setChessBoardTheme} />\n            </Route>\n\n          </Switch>\n        </Router>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}